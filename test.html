<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
	<style>
	#qs {
		height: 350px;
		text-align: center;
	}
	textarea {
		height: 150px;
		width: 100%;
	}
	.btnsq {
		border-radius: 0px
	}
	</style>
</head>
<body>
	<div class="container">

		<div class="col-xs-12 col-md-8">

		</div>

		<div class="col-xs-12 col-md-4 form">
			<div id="qs" >
				<div id="ad" class='question'>
						<p>Is the entry an addition or deletion?</p>
						<div class="btn-group" role="group">
							<button value="Addition" class="btn btnsq btn-warning">Addition</button>
							<button value="Deletion" class="btn btnsq btn-warning">Deletion</button>
						</div>
				</div>

				<div id="who" class='question'>
					<p>Who is the entry for?</p>
					<div class="btn-group-vertical" role="group">
						<button value="Self" class="btn btnsq btn-info">Self</button>
						<button value="Spouse" class="btn btnsq btn-info">Spouse</button>
						<button value="Self and spouse" class="btn btnsq btn-info">Self and spouse</button>
						<button value="Other" class="btn btnsq btn-info">Other dependent</button>
					</div>			
				</div>

				<div id="item" class='question'>
					<p>What category or item is the entry?</p>
					<div style="font-size: 0">
						<div class="btn-group-vertical btn-group" role="group">
							<button class="btn btnsq btn-primary" value='Shareholding'>Shareholding - 1</button>
							<button class="btn btnsq btn-primary" value='Trust beneficiary'>Trust <br>beneficiary - 2i</button>
							<button class="btn btnsq btn-primary" value='Trustee'>Trustee - 2ii</button>
							<button class="btn btnsq btn-primary" value='Real estate'>Real estate - 3</button>
							<button class="btn btnsq btn-primary" value='Directorship'>Directorship - 4</button>
							<button class="btn btnsq btn-primary" value='Partnership'>Partnership - 5</button>
							<button class="btn btnsq btn-primary" value='Liability'>Liability - 6</button>
							<button class="btn btnsq btn-primary" value='Bonds/debenture'>Bond or <br>debenture - 7</button>
						</div>
						<div class="btn-group-vertical btn-group" role="group">
							<button class="btn btnsq btn-primary" value='Savings/other accounts'>Savings/other<br> account - 8</button>
							<button class="btn btnsq btn-primary" value='Other asset'>Other asset - 9</button>
							<button class="btn btnsq btn-primary" value='Other income'><small>Other income - 10</small></button>
							<button class="btn btnsq btn-primary" value='Gift'>Gift - 11</button>
							<button class="btn btnsq btn-primary" value='Travel or hospitality'>Travel or <br>hospitality - 12</button>
							<button class="btn btnsq btn-primary" value='Membership'><small>Membership - 13</small></button>
							<button class="btn btnsq btn-primary" value='Other conflict'><small>Other conflict - 14</small></button>
							<button class="btn btnsq btn-primary" value='Not listed'><strong>Not listed</strong></button>	
						</div>
					</div>
				</div>

				<div id="text">
					<textarea class='textarea' style="width:80%;resize:none;"></textarea>
					<button class='btn btnsq btn-default'>Create entry</button>
				</div>
			</div>


			
			<div id="entrylist">
			<table class="table">
				<thead>
					<th id="#first"></th>
					<th>Entries</th>
					<th></th>
					<th colspan="2"><button id="entry" class='btn btnsq btn-default pull-right'>New entry</button></th>
										
				</thead>
			    <tbody>
			    	<tr>
				    	<td></td>
			    		<td colspan="3">You don't have any entries here! (yet...?)</td>
			    	</tr>
			    </tbody>
			</table>

			<div id="perm">
				<button class="btn btnsq btn-sm btn-danger">Can't read page</button> <button id="save" class="btn btnsq btn-sm btn-success pull-right">FINISHED THE PAGE!</button>
			</div>

		</div>

	</div>
	<script>
	var entries = []
	$( document ).ready(function() {
		
		//initial state
		$('#qs').hide();
		$('#qs').children().hide();

		//new entry button
		$('#entry').click(function() { 
			$('#qs').slideDown(200,function(){
				$('#ad').show(0,function(){
					$('#ad').siblings().hide()
				})
			});
			e = {};
		});

		//for whether it's an addition or deletion
		$('#ad > div > button').click(function() { 
			$('#ad').hide(0,function() { 
				$('#who').show(0)
			});
			e['ad'] = $(this).attr("value");
		});

		//for who it is for
		$('#who > div > button').click(function() { 
			$('#who').hide(0,function() { 
				$('#item').show(0)
			});
			e['who'] = $(this).attr("value");
		});

		//for what category it is
		$('#item > div > div > button').click(function() { 
			$('#item').hide(0,function() { 
				$('#text').show(0)
			});
			e['item'] = $(this).attr("value");
		});

		//for submit button
		$('#text > button').click(function(){
			$('#text').hide(0,function(){
				togqs();
			});
			var clear = function(html) {
		        return $( $.parseHTML(html) ).text();
		    };
			e['text'] = clear($('.textarea').val());
			$('.textarea').val('');
			entries.push(e);
			$('#first').val('');
			lister();
		})

		//for copy button
		$('table').on('click','.copy',function(){
			e = {};
			var copied = entries[$(this).attr("value")];
			e['ad'] = copied['ad'];
			e['who'] = copied['who'];
			e['item'] = copied['item'];
			e['text'] = copied['text'];
			$('.textarea').val(copied['text']);
			$('#text').show(0,function(){togqs()})
		})

		//for delete button
		$('table').on('click','.close',function(){
			console.log(entries);
			console.log($(this).attr("value"));
			entries.splice($(this).attr("value"), 1);
			lister();
			console.log(entries);
		})

		//for save button
		$('#save').on('click',function(){
			console.log(entries)
		})

	})

	var copythis = function(a) {
		console.log(a)
	}

	var togqs = function() {
		$('#qs').slideToggle()
	}

	var lister = function() {
		var table = ''
		for (entry in entries) {
			var page = parseInt(entry)+1
			table = table + 			`<tr> \
		        <td rowspan='2'></td> \
		        <td colspan='4'><button value=${entry} class='close' data-dismiss='alert' aria-label='close'>&times;</button>${entries[entry]['text']} \
		        </td> \
		    </tr> \
		    <tr> \
		      	<td><small>${entries[entry]['ad']}</small></td> \
		        <td><small>${entries[entry]['item']}</small></td> \
			    <td><small>${entries[entry]['who']}</small></td> \
			    <td><button value=${entry} class='btn btnsq btn-xs btn-default copy'>Copy</button> \
			</tr>`
		}
		$('tbody').html(table);

	}
	</script>
</body>
</html>